<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Shohoj World Adsextra - User Panel</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<!-- Adsextra Full-Screen Script -->
<script async src="https://partner.adextra.io/jt/f876f66c460290de2a5d83c060dfccaec15a21ea.js"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">

<header class="bg-gradient-to-r from-purple-700 to-pink-500 text-white p-4 flex items-center space-x-4 shadow-lg">
  <img id="userPhoto" src="https://via.placeholder.com/50" class="w-12 h-12 rounded-full border-2 border-white"/>
  <div>
    <h1 id="userName" class="text-lg font-bold">Guest User</h1>
    <p id="userUsername" class="text-sm opacity-80">@guest</p>
  </div>
</header>

<main class="p-4 flex-grow max-w-3xl mx-auto w-full space-y-4">
  <section class="grid grid-cols-2 sm:grid-cols-4 gap-2">
    <div class="bg-white rounded-xl p-4 shadow text-center">
      <p class="text-sm text-gray-500">‡¶Æ‡ßã‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</p>
      <p id="balance" class="text-2xl font-bold text-purple-700">0.00 ‡ß≥</p>
    </div>
    <div class="bg-white rounded-xl p-4 shadow text-center">
      <p class="text-sm text-gray-500">‡¶Æ‡ßã‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°</p>
      <p id="totalAds" class="text-2xl font-bold text-pink-600">0</p>
    </div>
    <div class="bg-white rounded-xl p-4 shadow text-center">
      <p class="text-sm text-gray-500">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®</p>
      <p id="tasks" class="text-2xl font-bold text-purple-700">0</p>
    </div>
    <div class="bg-white rounded-xl p-4 shadow text-center">
      <p class="text-sm text-gray-500">‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°</p>
      <p id="adsWatched" class="text-2xl font-bold text-pink-600">0</p>
    </div>
  </section>

  <!-- Watch Ad Section -->
  <section class="bg-white p-6 rounded-xl shadow text-center">
    <p class="mb-4 text-lg font-semibold text-gray-600">‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßá ‡¶Ü‡ßü ‡¶ï‡¶∞‡ßÅ‡¶®</p>
    <button id="watchAd" class="bg-purple-700 hover:bg-purple-800 text-white font-bold py-4 px-6 rounded-lg shadow-lg w-full max-w-xs mx-auto">
      üé• Adsextra ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
    </button>
  </section>

  <!-- Telegram / YouTube Links -->
  <section class="grid sm:grid-cols-3 gap-4">
    <a href="https://t.me/adbdlabbd" target="_blank" class="bg-gradient-to-r from-blue-500 to-blue-700 hover:scale-105 transition transform rounded-xl shadow-lg p-6 flex flex-col items-center text-white text-center">
      <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" class="w-12 h-12 mb-3" alt="Telegram"/>
      <h3 class="font-bold text-lg">Join Telegram 1</h3>
      <p class="text-sm opacity-80">Stay updated with latest ads</p>
    </a>

    <a href="https://t.me/appfilethnf" target="_blank" class="bg-gradient-to-r from-blue-500 to-blue-700 hover:scale-105 transition transform rounded-xl shadow-lg p-6 flex flex-col items-center text-white text-center">
      <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" class="w-12 h-12 mb-3" alt="Telegram"/>
      <h3 class="font-bold text-lg">Join Telegram 2</h3>
      <p class="text-sm opacity-80">Get more app files</p>
    </a>

    <a href="https://www.youtube.com/@sketchware_builder" target="_blank" class="bg-gradient-to-r from-red-500 to-red-700 hover:scale-105 transition transform rounded-xl shadow-lg p-6 flex flex-col items-center text-white text-center">
      <img src="https://cdn-icons-png.flaticon.com/512/1384/1384060.png" class="w-12 h-12 mb-3" alt="YouTube"/>
      <h3 class="font-bold text-lg">Subscribe YouTube</h3>
      <p class="text-sm opacity-80">Sketchware Builder Channel</p>
    </a>
  </section>
</main>

<!-- Adsextra Container -->
<div id="f876f66c460290de2a5d83c060dfccaec15a21ea"></div>

<script>
let user = { id:"guest", name:"Guest", username:"guest", photo:"https://via.placeholder.com/50", balance:0, totalAds:0, tasks:0, adsWatched:0 };

// Telegram user info
if (window.Telegram?.WebApp?.initDataUnsafe?.user) {
  let tg = window.Telegram.WebApp.initDataUnsafe.user;
  user.id = tg.id.toString();
  user.name = tg.first_name + (tg.last_name ? " " + tg.last_name : "");
  user.username = tg.username || "guest";
  user.photo = tg.photo_url || "https://via.placeholder.com/50";
}
document.getElementById("userName").innerText = user.name;
document.getElementById("userUsername").innerText = "@" + user.username;
document.getElementById("userPhoto").src = user.photo;

// Load users.json
fetch("users.json").then(r=>r.json()).then(users=>{
  if(users[user.id]){
    user = users[user.id];
  }
  updateUI();
});

// Save and update functions
function updateUI(){
  document.getElementById("balance").innerText = user.balance.toFixed(2)+" ‡ß≥";
  document.getElementById("totalAds").innerText = user.totalAds;
  document.getElementById("tasks").innerText = user.tasks;
  document.getElementById("adsWatched").innerText = user.adsWatched;
}

function saveUser(){
  fetch("save_user.php",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify(user)
  });
}

// Adsextra Full-Screen function
function showAdsextraFullScreen() {
    return new Promise((resolve, reject) => {
        try {
            const onSuccess = () => resolve();
            const onError = () => reject("Ad failed");

            setTimeout(() => {
                p_adextra(onSuccess, onError);
            }, 2000);
        } catch (e) {
            reject(e);
        }
    });
}

// Watch Ad button ‚Üí Adsextra
document.getElementById("watchAd").addEventListener("click", async () => {
    try {
        await showAdsextraFullScreen();
        user.totalAds++;
        user.adsWatched++;
        user.balance += 0.1; // earnings per ad
        saveUser();
        updateUI();
    } catch(e) {
        alert(e); // ad failed
    }
});
</script>
</body>
</html>
    
